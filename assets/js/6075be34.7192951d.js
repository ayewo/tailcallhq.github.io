"use strict";(self.webpackChunktailcall_run=self.webpackChunktailcall_run||[]).push([[9135],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,m=u["".concat(s,".").concat(d)]||u[d]||h[d]||l;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8115:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>s});var a=n(7462),r=(n(7294),n(3905));const l={title:"Tailcall Tutorial"},i=void 0,o={type:"mdx",permalink:"/quickstart",source:"@site/src/pages/quickstart.md",title:"Tailcall Tutorial",description:"Quickstart",frontMatter:{title:"Tailcall Tutorial"}},s=[{value:"Quickstart",id:"quickstart",level:2},{value:"Requirements:",id:"requirements",level:3},{value:"Installation",id:"installation",level:3},{value:"Start the tailcall server",id:"start-the-tailcall-server",level:3},{value:"Compose REST apis into a GraphQL schema",id:"compose-rest-apis-into-a-graphql-schema",level:3},{value:"Create the schema definition",id:"create-the-schema-definition",level:4},{value:"Register the schema definition with the server",id:"register-the-schema-definition-with-the-server",level:4},{value:"Query the registered schema",id:"query-the-registered-schema",level:4}],p={toc:s};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"quickstart"},"Quickstart"),(0,r.kt)("h3",{id:"requirements"},"Requirements:"),(0,r.kt)("p",null,"To run Tailcall, you need to have Java 11 or above installed on your machine."),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download the latest release of Tailcall from ",(0,r.kt)("a",{href:"https://github.com/tailcallhq/monotail/releases/latest",target:"_blank"},"the latest release page "),". The release is named ",(0,r.kt)("inlineCode",{parentName:"p"},"tailcall-v<x.y.z>.zip")," where ",(0,r.kt)("inlineCode",{parentName:"p"},"x.y.z")," is the latest release version.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Create a directory and unzip the file in the directory. The unzipped file contains the following directory structure -"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},".\n\u251c\u2500\u2500 bin\n\u2502   \u251c\u2500\u2500 tailcall\n\u2502   \u251c\u2500\u2500 tailcall_cli_main\n\u2502   \u251c\u2500\u2500 tailcall_cli_main.bat\n\u2502   \u251c\u2500\u2500 tailcall_server_main\n\u2502   \u251c\u2500\u2500 tailcall_server_main.bat\n\u2502   \u2514\u2500\u2500 tailcall.bat\n\u2514\u2500\u2500 lib\n    \u251c\u2500\u2500 cli-assembly-0.1.0-SNAPSHOT.jar\n    \u2514\u2500\u2500 server-assembly-0.1.0-SNAPSHOT.jar\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"bin")," contains the executable files for the tailcall server and the tailcall command line interface (cli)"))),(0,r.kt)("p",null,"Tailcall consists of two parts, the ",(0,r.kt)("inlineCode",{parentName:"p"},"CLI")," or Command Line Interface, and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Server"),".\nThe CLI is used to define, validate and register a composed api definition with the server, and once registered, graphql queries can be made to the server."),(0,r.kt)("h3",{id:"start-the-tailcall-server"},"Start the tailcall server"),(0,r.kt)("p",null,"Change to the bin directory, and run the ",(0,r.kt)("inlineCode",{parentName:"p"},"tailcall_server_main")," file. You should see a message like the one below"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'timestamp=2023-06-05T17:37:03.223098Z level=INFO thread=#zio-fiber-4 message="Server started: http://localhost:8080/graphql" location=tailcall.server.Main.run file=Main.scala line=15\n')),(0,r.kt)("p",null,"Go to ",(0,r.kt)("a",{href:"http://localhost:8080/graphql",target:"_blank"},"http://localhost:8080/graphql")," in your browser, and you should see the graphql playground where you can query the registered definitions on the server."),(0,r.kt)("p",null,"Lets try it now by querying for all existing blueprints on the server. A ",(0,r.kt)("strong",{parentName:"p"},"blueprint")," represents a registered composed schema definition on the server."),(0,r.kt)("p",null,"Paste the following query into the left hand pane."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},"query {\n  blueprints {\n    url\n  }\n}\n")),(0,r.kt)("p",null,"Now execute it by clicking on the arrow button. You should see an empty result set for ",(0,r.kt)("inlineCode",{parentName:"p"},"blueprints")," in the right hand pane, since we have not registered anything yet."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n  "data": {\n    "blueprints": []\n  }\n}\n')),(0,r.kt)("h3",{id:"compose-rest-apis-into-a-graphql-schema"},"Compose REST apis into a GraphQL schema"),(0,r.kt)("p",null,"For our first example, we are going to compose a graphql schema from the REST apis at ",(0,r.kt)("a",{href:"https://jsonplaceholder.typicode.com/",target:"_blank"},(0,r.kt)("a",{parentName:"p",href:"https://jsonplaceholder.typicode.com/"},"https://jsonplaceholder.typicode.com/")),", a free online REST api with some fake data.\nWe will use the api at ",(0,r.kt)("inlineCode",{parentName:"p"},"https://jsonplaceholder.typicode.com/users")," to get a list of users, and ",(0,r.kt)("inlineCode",{parentName:"p"},"https://jsonplaceholder.typicode.com/users/:id/posts")," to get the posts for each user, and compose them into a single GraphQL schema."),(0,r.kt)("h4",{id:"create-the-schema-definition"},"Create the schema definition"),(0,r.kt)("p",null,"Create a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"jsonplaceholder.graphql")," and paste the following contents into it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'schema @server(baseURL: "http://jsonplaceholder.typicode.com") {\n  query: Query\n}\n\ntype Query {\n  users: [User] @http(path: "/users")\n}\n\ntype User {\n  id: Int!\n  name: String!\n  username: String!\n  email: String!\n  email: String!\n  posts: [Post] @http(path: "/users/{{value.id}}/posts")\n}\n\ntype Post {\n  id: Int!\n  title: String!\n  body: String!\n}\n')),(0,r.kt)("p",null,"In the above schema definition, we"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Define a base URL for the resources that will be composed together"),(0,r.kt)("li",{parentName:"ol"},"Define a query to query all users"),(0,r.kt)("li",{parentName:"ol"},"Define the data types ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"Post")),(0,r.kt)("li",{parentName:"ol"},"Specify how to fetch the ",(0,r.kt)("inlineCode",{parentName:"li"},"posts")," for a user")),(0,r.kt)("h4",{id:"register-the-schema-definition-with-the-server"},"Register the schema definition with the server"),(0,r.kt)("p",null,"Now, again in the ",(0,r.kt)("inlineCode",{parentName:"p"},"bin")," directory, run the following command to register this schema with the server. Specify the full path to the ",(0,r.kt)("inlineCode",{parentName:"p"},"jsonplaceholder.graphql")," file that you created above."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./tailcall_cli_main publish -r http://localhost:8080 jsonplaceholder.graphql\n")),(0,r.kt)("p",null,"If the command succeds, you should see output like the following below."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Deployment was completed successfully.\nDigest:     4ee03fde640e2f4c3e65c570971cc8b9ef6964926a79eed884eca6f864a43165\nEndpoints:  2\nUnsafe:     0\nPlayground: http://localhost:8080/graphql/4ee03fde640e2f4c3e65c570971cc8b9ef6964926a79eed884eca6f864a43165.\nN + 1:      1\n")),(0,r.kt)("p",null,"The server registers the schema, and makes it available for querying at the playground URL in the output. Open the playground URL in a new tab in your browser. You can query the composed schema here."),(0,r.kt)("h4",{id:"query-the-registered-schema"},"Query the registered schema"),(0,r.kt)("p",null,"Lets try the following query, to get all the users, and the title of each post of each user."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},"query {\n  users {\n    id\n    name\n    posts {\n      title\n    }\n  }\n}\n")),(0,r.kt)("p",null,"You should see output like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},'{\n  "data": {\n    "users": [\n      {\n        "id": 1,\n        "name": "Leanne Graham",\n        "posts": [\n          {\n            "title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit"\n          },\n          ...\n        ]\n      },\n      {\n        "id": 2,\n        "name": "Ervin Howell",\n        "posts": [\n          {\n            "title": "et ea vero quia laudantium autem"\n          },\n          {\n            "title": "in quibusdam tempore odit est dolorem"\n          },\n          ...\n        ]\n      }\n    ]\n  }\n}\n')),(0,r.kt)("p",null,"You can now add additional fields, and compose more queries together!"))}c.isMDXComponent=!0}}]);