"use strict";(self.webpackChunktailcall_run=self.webpackChunktailcall_run||[]).push([[591],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=l(n),h=r,c=m["".concat(p,".").concat(h)]||m[h]||u[h]||i;return n?a.createElement(c,o(o({ref:t},d),{},{components:n})):a.createElement(c,o({ref:t},d))}));function c(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=h;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[m]="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3126:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:2,title:"Operators",slug:"/operators"},o=void 0,s={unversionedId:"intro/operators",id:"intro/operators",title:"Operators",description:"Tailcall DSL builds on your existing GraphQL knowledge by allowing the addition of some custom operators, termed 'Operators'. These operators provide powerful compile time guarantees to make sure your API composition is tight and robust. It also automatically generates highly optimized resolver logic for your types.",source:"@site/docs/intro/operators.md",sourceDirName:"intro",slug:"/operators",permalink:"/docs/operators",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/intro/operators.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Operators",slug:"/operators"},sidebar:"tutorialSidebar",previous:{title:"Quick Start",permalink:"/docs/"}},p={},l=[{value:"@server",id:"server",level:3},{value:"@http",id:"http",level:3},{value:"baseURL",id:"baseurl",level:4},{value:"path",id:"path",level:4},{value:"method",id:"method",level:4},{value:"query",id:"query",level:4},{value:"body",id:"body",level:4},{value:"@modify",id:"modify",level:3},{value:"@inline",id:"inline",level:3},{value:"Advanced Topics",id:"advanced-topics",level:2},{value:"Composing Operators",id:"composing-operators",level:3}],d={toc:l},m="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Tailcall DSL builds on your existing GraphQL knowledge by allowing the addition of some custom operators, termed 'Operators'. These operators provide powerful compile time guarantees to make sure your API composition is tight and robust. It also automatically generates highly optimized resolver logic for your types."),(0,r.kt)("h3",{id:"server"},"@server"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"@server")," operator is utilized to define critical server configurations for your GraphQL application. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'schema @server(\n    baseURL: "https://jsonplaceholder.typicode.com",\n    vars: { foo: "bar" }\n) {\n    query: Query\n    mutation: Mutation\n}\n')),(0,r.kt)("p",null,"In this example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"@server")," operator is added to the GraphQL ",(0,r.kt)("inlineCode",{parentName:"p"},"schema")," definition."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"baseURL"),": We've set \"",(0,r.kt)("a",{parentName:"p",href:"https://jsonplaceholder.typicode.com%22"},'https://jsonplaceholder.typicode.com"')," as our ",(0,r.kt)("inlineCode",{parentName:"p"},"baseURL"),". This means that all API calls made by our GraphQL server defined by ",(0,r.kt)("a",{parentName:"p",href:"#http"},"@http")," will start with this URL.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"vars"),": We've passed in a vars object with a key of ",(0,r.kt)("inlineCode",{parentName:"p"},"foo")," and a value of ",(0,r.kt)("inlineCode",{parentName:"p"},"bar"),". This represents a local variable that could be used by the GraphQL server during its operations."))),(0,r.kt)("h3",{id:"http"},"@http"),(0,r.kt)("p",null,"This ",(0,r.kt)("strong",{parentName:"p"},"@http")," operator serves as an indication of a field or node that is underpinned by a REST API. For Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Query {\n    user(id: ID!): User @http(path: "/users")\n}\n')),(0,r.kt)("p",null,"In this example, the ",(0,r.kt)("inlineCode",{parentName:"p"},"@http")," operator is added to the ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," field of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Query")," type. This means that the ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," field is underpinned by a REST API. The ",(0,r.kt)("a",{parentName:"p",href:"#path"},"path")," argument is used to specify the path of the REST API. In this case, the path is ",(0,r.kt)("inlineCode",{parentName:"p"},"/users"),". This means that the GraphQL server will make a GET request to ",(0,r.kt)("inlineCode",{parentName:"p"},"https://jsonplaceholder.typicode.com/users")," when the ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," field is queried."),(0,r.kt)("h4",{id:"baseurl"},"baseURL"),(0,r.kt)("p",null,"This refers to the base URL of the API. If not specified, the default base URL is the one specified in the ",(0,r.kt)("a",{parentName:"p",href:"#server"},"@server")," operator."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Query {\n    user(id: ID!): User @http(path: "/users", baseURL: "https://jsonplaceholder.typicode.com")\n}\n')),(0,r.kt)("h4",{id:"path"},"path"),(0,r.kt)("p",null,"This refers to the API endpoint you're going to call. For instance ",(0,r.kt)("a",{parentName:"p",href:"https://jsonplaceholder.typicode.com/users%60"},"https://jsonplaceholder.typicode.com/users`"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Query {\n    user(id: ID!): User @http(path: "/users")\n}\n')),(0,r.kt)("p",null,"If your API endpoint contains dynamic segments, you can use Mustache templates to substitute variables. For example, to fetch a specific user, the path can be written as ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/{{args.id}}"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Query {\n    user(id: ID!): User @http(path: "/users/{{args.id}}")\n}\n')),(0,r.kt)("h4",{id:"method"},"method"),(0,r.kt)("p",null,"This refers to the HTTP method of the API call. Commonly used methods include GET, POST, PUT, DELETE, etc. If not specified, the default method is GET. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Mutation {\n    createUser(input: UserInput!): User @http(method: "POST", path: "/users")\n}\n')),(0,r.kt)("h4",{id:"query"},"query"),(0,r.kt)("p",null,"This represents the query parameters of your API call. You can pass it as a static object or use Mustache template for dynamic parameters. These parameters will be added to the URL. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Query {\n    userPosts(id: ID!): [Post] @http(path: "/posts", query: {userId : "{{args.id}}" })\n}\n')),(0,r.kt)("h4",{id:"body"},"body"),(0,r.kt)("p",null,"The body of the API call. It's used for methods like POST or PUT that send data to the server. You can pass it as a static object or use a Mustache template to substitute variables from the GraphQL variables. For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type Mutation {\n    createUser(input: UserInput!): User @http(method: "POST", path: "/users", body: "{{args.input}}")\n}\n')),(0,r.kt)("p",null,"In the example above, the ",(0,r.kt)("inlineCode",{parentName:"p"},"createUser")," mutation sends a POST request to ",(0,r.kt)("inlineCode",{parentName:"p"},"/users"),", with the input object converted to JSON and included in the request body."),(0,r.kt)("h3",{id:"modify"},"@modify"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"@modify")," operator in GraphQL provides the flexibility to alter the attributes of a field or a node within your GraphQL schema. Here's how you can use this operator:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Renaming a Field or Node"),"\nYou can rename a field or a node in your GraphQL schema using the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," argument in the ",(0,r.kt)("inlineCode",{parentName:"p"},"@modify")," operator. This can be helpful when the field name in your underlying data source doesn't match the desired field name in your schema. For instance:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type User {\n    id: Int! @modify(rename: "userId")\n}   \n')),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},'@modify(rename: "userId")')," tells GraphQL that although the field is referred to as ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"in the underlying data source, it should be presented as ",(0,r.kt)("inlineCode",{parentName:"p"},"userId")," in your schema.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Excluding a Field or Node")),(0,r.kt)("p",{parentName:"li"},"You can exclude a field or a node from your GraphQL schema using the ",(0,r.kt)("inlineCode",{parentName:"p"},"omit")," argument in the ",(0,r.kt)("inlineCode",{parentName:"p"},"@modify")," operator. This can be useful if you want to keep certain data hidden from the client. For instance:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},"type User {\n    id: Int! @modify(omit: true)\n}\n")),(0,r.kt)("p",{parentName:"li"}," ",(0,r.kt)("inlineCode",{parentName:"p"},"@modify(omit: true)")," tells GraphQL that the ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," field should not be included in the schema, thus it won't be accessible to the client."))),(0,r.kt)("h3",{id:"inline"},"@inline"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"@inline")," operator offers the ability to 'inline' or flatten a field or node in your schema. You provide the path to the field or node you wish to inline as an argument to the operator. This is particularly useful for simplifying your schema by reducing unnecessary levels of nesting. This operator is also changing your actual schema along with doing the data transformation."),(0,r.kt)("p",null,"Consider the following GraphQL schema:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'schema {\n    query: Query\n}\n\ntype Post {\n    id: Int!\n    user: User\n}\n\ntype User {\n    id: Int!\n    name: String!\n    email: String!\n    address: Address\n}\n\ntype Address {\n    street: String!\n    city: String!\n    state: String!\n}\n\ntype Query {\n    postUserStreet(id: Int): Post @inline(path: ["user","address", "street"])\n}\n')),(0,r.kt)("p",null,"Breaking down the above:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The schema is defined with ",(0,r.kt)("inlineCode",{parentName:"li"},"Query")," as the root query type."),(0,r.kt)("li",{parentName:"ol"},"Three types ",(0,r.kt)("inlineCode",{parentName:"li"},"Post"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"User"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"Address")," are defined:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Post")," has a field ",(0,r.kt)("inlineCode",{parentName:"li"},"user")," of type ",(0,r.kt)("inlineCode",{parentName:"li"},"User"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"User")," has a field ",(0,r.kt)("inlineCode",{parentName:"li"},"address")," of type ",(0,r.kt)("inlineCode",{parentName:"li"},"Address"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Address")," has three fields ",(0,r.kt)("inlineCode",{parentName:"li"},"street"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"city"),", and ",(0,r.kt)("inlineCode",{parentName:"li"},"state"),".")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"The root query type ",(0,r.kt)("inlineCode",{parentName:"li"},"Query")," has a field ",(0,r.kt)("inlineCode",{parentName:"li"},"postUserAddress")," of type ",(0,r.kt)("inlineCode",{parentName:"li"},"Post"),".")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"@inline")," operator is used on the ",(0,r.kt)("inlineCode",{parentName:"p"},"postUserAddress")," field of the ",(0,r.kt)("inlineCode",{parentName:"p"},"Query")," type. The ",(0,r.kt)("inlineCode",{parentName:"p"},"path")," argument to ",(0,r.kt)("inlineCode",{parentName:"p"},"@inline")," specifies the sequence of fields to traverse from ",(0,r.kt)("inlineCode",{parentName:"p"},"Post")," to the field to be inlined, ",(0,r.kt)("inlineCode",{parentName:"p"},"address")," in this case. Thus, ",(0,r.kt)("inlineCode",{parentName:"p"},'["user","address","street"]')," denotes the path ",(0,r.kt)("inlineCode",{parentName:"p"},"Post")," -> ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," -> ",(0,r.kt)("inlineCode",{parentName:"p"},"Address"),"."),(0,r.kt)("p",null,"After applying the ",(0,r.kt)("inlineCode",{parentName:"p"},"@inline")," operator, your schema is transformed to:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},"schema {\n    query: Query\n}\n\ntype Query {\n   postUserAddress(id: Int): String\n}\n")),(0,r.kt)("p",null,"Here's what happened:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"@inline")," operator effectively removed the ",(0,r.kt)("inlineCode",{parentName:"li"},"Post"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"Address")," types from your schema, along with their associated fields."),(0,r.kt)("li",{parentName:"ol"},"Instead of ",(0,r.kt)("inlineCode",{parentName:"li"},"postUserAddress")," returning a ",(0,r.kt)("inlineCode",{parentName:"li"},"Post")," object which would then require traversing ",(0,r.kt)("inlineCode",{parentName:"li"},"post")," to get to ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," and then ",(0,r.kt)("inlineCode",{parentName:"li"},"user")," to get to ",(0,r.kt)("inlineCode",{parentName:"li"},"Address"),", and then ",(0,r.kt)("inlineCode",{parentName:"li"},"address")," to get to ",(0,r.kt)("inlineCode",{parentName:"li"},"street"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"postUserAddress")," now directly returns a ",(0,r.kt)("inlineCode",{parentName:"li"},"string")," which represents address street.")),(0,r.kt)("p",null,"This operator helps to declutter your schema and simplifies the data fetching process for the client, as it reduces the depth of the queries they need to make."),(0,r.kt)("h2",{id:"advanced-topics"},"Advanced Topics"),(0,r.kt)("h3",{id:"composing-operators"},"Composing Operators"),(0,r.kt)("p",null,'This example illustrates the concept of composition in GraphQL, which allows you to combine multiple operations (known as "operators") to build more complex transformations of data.'),(0,r.kt)("p",null,"The given schema is defining two data types - ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Post"),". The ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," type has fields ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),", and the ",(0,r.kt)("inlineCode",{parentName:"p"},"Post")," type initially has fields ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"userId"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql",metastring:"showLineNumbers",showLineNumbers:!0},'type User {\n    id: Int\n    name: String\n}\ntype Post {\n    user: User @inline(path: ["name"]) @modify(name: "userName") @http(path: "/users/{{userId}}")\n    userId: Int!\n}\n')),(0,r.kt)("p",null,"However, it uses a series of operators to modify the ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," field."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},'@inline(path: ["name"])')," operator is used to drill down into the ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," object, specifically targeting the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," field. This is equivalent to fetching the ",(0,r.kt)("inlineCode",{parentName:"p"},"User.name")," property.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},'@modify(name: "userName")')," operator is used to rename the inlined ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," field to ",(0,r.kt)("inlineCode",{parentName:"p"},"userName"),". So, instead of a ",(0,r.kt)("inlineCode",{parentName:"p"},"user")," field that is a ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," object, we now have a ",(0,r.kt)("inlineCode",{parentName:"p"},"userName")," field that is a ",(0,r.kt)("inlineCode",{parentName:"p"},"String"),".")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},'@http(path: "/users/{{userId}}")')," operator is used to instruct the resolver to make an HTTP request to fetch the user data from a specified path (i.e., ",(0,r.kt)("inlineCode",{parentName:"p"},"/users/{{userId}}"),"), where ",(0,r.kt)("inlineCode",{parentName:"p"},"{{userId}}")," is a placeholder that would be replaced with the actual ",(0,r.kt)("inlineCode",{parentName:"p"},"userId")," when making the request."))),(0,r.kt)("p",null,"The schema after this transformation looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-graphql"},"type User {\n    id: Int\n    name: String\n}\ntype Post {\n    userName: String\n    userId: Int!\n}\n")),(0,r.kt)("p",null,"So, we've used composition of operators to take a complex object (the ",(0,r.kt)("inlineCode",{parentName:"p"},"User")," inside the ",(0,r.kt)("inlineCode",{parentName:"p"},"Post"),"), extract a specific part of it (",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"), rename that part (",(0,r.kt)("inlineCode",{parentName:"p"},"userName"),"), and then instruct GraphQL how to fetch the data using an HTTP request."),(0,r.kt)("p",null,"This is a powerful mechanism that allows you to make your GraphQL schema more precise, easier to understand, and more suitable for the specific needs of your application."))}u.isMDXComponent=!0}}]);