<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-intro/architecture">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Architecture | Tailcall</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tailcall.run/docs/intro/architecture"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture | Tailcall"><meta data-rh="true" name="description" content="What we have built is a open-source API orchestration solution that really thinks about the problem from first principles and achieves far superior results than the legacy solutions that available today. To understand how it works, here is the technical implementation of our solution."><meta data-rh="true" property="og:description" content="What we have built is a open-source API orchestration solution that really thinks about the problem from first principles and achieves far superior results than the legacy solutions that available today. To understand how it works, here is the technical implementation of our solution."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tailcall.run/docs/intro/architecture"><link data-rh="true" rel="alternate" href="https://tailcall.run/docs/intro/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://tailcall.run/docs/intro/architecture" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tailcall RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tailcall Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-JEP3QDWT0G","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script><link rel="stylesheet" href="/assets/css/styles.74196f7c.css">
<link rel="preload" href="/assets/js/runtime~main.627f8ee8.js" as="script">
<link rel="preload" href="/assets/js/main.d6a2794e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_gu5v" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-light.svg" alt="Tailcall Logo" class="themedImage_otCA themedImage--light_d4UA"><img src="/img/logo-light.svg" alt="Tailcall Logo" class="themedImage_otCA themedImage--dark_ePx5"></div><b class="navbar__title text--truncate">Tailcall</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a href="https://blog.tailcall.run" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/tailcallhq/tailcall" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="searchBox_UQT_"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_IbdI docsWrapper_HdE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_SdI4" type="button"></button><div class="docPage_cDO8"><aside class="theme-doc-sidebar-container docSidebarContainer_otbp"><div class="sidebarViewport_K3Wb"><div class="sidebar_oDHW"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_vPEQ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Problem Statement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/intro/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/intro/quickstart">Quick Start</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/advanced/operators">Advanced</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_BYXc"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_nDJs"><div class="docItemContainer_OGiL"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_k3Z9" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_JACu"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Introduction</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_QCOD theme-doc-toc-mobile tocMobile_N0YI"><button type="button" class="clean-btn tocCollapsibleButton_pHwF">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Architecture</h1></header><p>What we have built is a open-source API orchestration solution that really thinks about the problem from first principles and achieves far superior results than the legacy solutions that available today. To understand how it works, here is the technical implementation of our solution.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="high-level-architecture">High-Level Architecture<a href="#high-level-architecture" class="hash-link" aria-label="Direct link to High-Level Architecture" title="Direct link to High-Level Architecture">​</a></h2><p>The clients and the services remain the same with an addition of three components viz. The <strong>Composition Spec</strong> (also known as the “Blueprint”), Schema <strong>Registry,</strong> and the Tailcall <strong>Gateway</strong>.</p><p><img loading="lazy" alt="Tailcall Architecture Diagram" src="/assets/images/tailcall-architecture-b45336f22a3e603f3b825871fea29bc5.png" width="1600" height="838" class="img_wQsy"></p><p>The Schema Registry serves as a repository for the metadata that outlines how the APIs are structured. This metadata encompasses a range of information, including details about the service endpoint, the input schema associated with the endpoint, and any pertinent security and resilience parameters. Upon receipt of a client request via the gateway, the system dynamically retrieves the corresponding metadata from the registry. It then uses this information to shape its logic and effectively communicate with the client&#x27;s microservices, ensuring efficient and secure request handling.</p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="composition-specification-blueprint">Composition Specification (Blueprint)<a href="#composition-specification-blueprint" class="hash-link" aria-label="Direct link to Composition Specification (Blueprint)" title="Direct link to Composition Specification (Blueprint)">​</a></h2><p>The Composition Specification (Spec) encompasses all necessary data required for constructing APIs. It comprises the schema of valid request-response pairs, host and protocol specifics, and anticipations for resiliency such as throttling and caching mechanisms. Additionally, it encapsulates critical security aspects, including authentication and authorization measures, among others. This all-encompassing document ensures each component in the API architecture aligns with the defined standards, thus ensuring a robust and secure system.</p><p><img loading="lazy" alt="Composition Spec Visualization" src="/assets/images/tailcall-blueprint-4f3aa85f8d63106977f79070b070e934.png" width="1600" height="457" class="img_wQsy"></p><h2 class="anchor anchorWithStickyNavbar_FNw8" id="publish">Publish<a href="#publish" class="hash-link" aria-label="Direct link to Publish" title="Direct link to Publish">​</a></h2><p>Once the composition specification is ready, we publish the specification on the tailcall registry. The publishing process has multiple steps.</p><ol><li><p>We run all the validations and check if there are any invalid states in the composition specification provided by the developer.</p></li><li><p>We also identify performance bottlenecks in the way APIs are composed for eg: the N + 1 problem.</p><blockquote><p>💡 The N + 1 problem in API composition refers to a situation where a single request to an API results in multiple additional requests being made. This can occur when an API returns a list of objects that each require additional data from another API, resulting in a separate request for each object. This can lead to poor performance and increased load on the API. The problem can be solved by using techniques such as &quot;eager loading&quot; or &quot;batching&quot; to reduce the number of requests made.</p></blockquote></li><li><p>We recommend standard best practices for API composition so that developers can integrate it on day one.</p></li><li><p>We also apply many optimizations eg: including constant folding, inlining, <a href="https://github.com/graphql/dataloader" target="_blank" rel="noopener noreferrer">data-loader</a>, etc.</p></li><li><p>Before publishing a unique sha256 hash is generated for the specification provided by the developer (We will learn more about this in the coming sections)</p></li><li><p>As a final step in this publishing process, a unified endpoint is automatically generated, ensuring seamless API integration.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_FNw8" id="client-consumption">Client Consumption<a href="#client-consumption" class="hash-link" aria-label="Direct link to Client Consumption" title="Direct link to Client Consumption">​</a></h2><p>When the client makes a request it needs to make sure the hash is sent as a part of the request. This is the same hash that’s produced before publishing on the registry.</p><div class="language-bash codeBlockContainer_aalF theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_MHx8"><pre tabindex="0" class="prism-code language-bash codeBlock_zHgq thin-scrollbar"><code class="codeBlockLines_RjmQ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://cloud.tailcall.com/graphql/d5fb012&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --data-raw </span><span class="token string" style="color:#e3116c">&#x27;{&quot;query&quot;: &quot;{ posts { title body user { name email } } } }&quot;}&#x27;</span><br></span></code></pre><div class="buttonGroup_Sd8_"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_LnQD" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_t3l1"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_IiZV"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_FNw8" id="hash-code">Hash Code<a href="#hash-code" class="hash-link" aria-label="Direct link to Hash Code" title="Direct link to Hash Code">​</a></h2><p>The SHA-256 hash for the composition specification isn&#x27;t created merely from the textual representation of the specification. Instead, it is derived from the semantic meaning of the specification - that is, the underlying logic, structure, and purpose behind the API composition, rather than the literal text or syntax.</p><p>This method provides a more stable hash because changes in comment, formatting, or syntax, which do not affect the overall function or purpose of the API, do not alter the hash. The hash, therefore, remains consistent unless there are changes to the specification&#x27;s semantic meaning. This approach ensures that the hash serves as an accurate and reliable identifier for each unique orchestration. This is the most important and differentiated feature of the system because it allows us to do the following:</p><ol><li><strong>Versioning:</strong> Each change is version controlled. You can run multiple versions of the specification at the same time in production, without actually maintaining the source code of each one of them or using the additional infrastructure.</li><li><strong>Canary Releases:</strong> This becomes a first-class feature of the gateway. Because the spec is versioned we can control the exposure of a newly developed feature easily.</li><li><strong>Immutability:</strong> Every specification is immutable, ensuring that once deployed and stabilized in production, it cannot be altered at runtime. This characteristic enhances the safety of product rollbacks.</li><li><strong>Breaking Changes:</strong> As each specification operates independently, deploying breaking changes in production won&#x27;t affect existing clients, maintaining operational stability and integrity.</li></ol><p><img loading="lazy" alt="Digest Creation" src="/assets/images/tailcall-digest-c63785f90ab664bed47194dc554436da.png" width="1600" height="648" class="img_wQsy"></p><p>Hope the architecture makes sense. If you have any questions, please feel free to reach out to us on our <a href="https://discord.gg/7fseDEXUNU" target="_blank" rel="noopener noreferrer">discord</a> channel, we would love to hear from you.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/intro/architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_NulP" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated__GQF"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Problem Statement</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/intro/quickstart"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Quick Start</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_IS5x thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#high-level-architecture" class="table-of-contents__link toc-highlight">High-Level Architecture</a></li><li><a href="#composition-specification-blueprint" class="table-of-contents__link toc-highlight">Composition Specification (Blueprint)</a></li><li><a href="#publish" class="table-of-contents__link toc-highlight">Publish</a></li><li><a href="#client-consumption" class="table-of-contents__link toc-highlight">Client Consumption</a></li><li><a href="#hash-code" class="table-of-contents__link toc-highlight">Hash Code</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/7fseDEXUNU" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="mailto:hi@tailcall.run" target="_blank" rel="noopener noreferrer" class="footer__link-item">hi@tailcall.run</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/tailcall" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Tailcall, Inc. </div></div></div></footer></div>
<script src="/assets/js/runtime~main.627f8ee8.js"></script>
<script src="/assets/js/main.d6a2794e.js"></script>
</body>
</html>